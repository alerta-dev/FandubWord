<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fandubbers Portfolio</title>

    <!-- Google Font Poppins -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React + ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Babel (permite JSX en el navegador) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Framer Motion (animaciones) -->
    <script src="https://unpkg.com/framer-motion/dist/framer-motion.umd.js"></script>

    <!-- Lucide Icons (versión UMD para navegador) -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

    <style>
      body {
        font-family: "Poppins", ui-sans-serif, system-ui;
      }
    </style>
  </head>
  <body class="bg-white text-gray-900">
    <div id="root"></div>

    <script type="text/babel">
      const { useEffect, useMemo, useState } = React;
      const { motion } = window.framerMotion;
      const { ArrowRight, ArrowLeft, Search, Tag } = window.lucide;

      // ---------------- Mock Data ----------------
      const MOCK_DATA = [
        {
          slug: "lunaria-voice",
          name: "Lunaria Voice",
          avatar:
            "https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=640&auto=format&fit=crop",
          description:
            "Fandubber enfocada en anime dramático y narraciones inmersivas. Tonos cálidos y actuaciones emotivas.",
          tags: ["fandubber", "narrador", "español-latino"],
          videos: [
            "https://www.youtube.com/embed/dQw4w9WgXcQ",
            "https://www.youtube.com/embed/oHg5SJYRHA0",
          ],
        },
        {
          slug: "aster-cover",
          name: "Aster Cover",
          avatar:
            "https://images.unsplash.com/photo-1517841905240-472988babdf9?q=80&w=640&auto=format&fit=crop",
          description:
            "Coverista con enfoque en openings y endings. Mezcla voces limpias con armonías suaves.",
          tags: ["coverista", "canto", "jpop"],
          videos: [
            "https://www.youtube.com/embed/ysz5S6PUM-U",
            "https://www.youtube.com/embed/tAGnKpE4NCI",
          ],
        },
      ];

      const allTags = Array.from(new Set(MOCK_DATA.flatMap((p) => p.tags))).sort();

      const cls = (...arr) => arr.filter(Boolean).join(" ");

      function useHashRoute() {
        const parse = () => {
          const h = window.location.hash.replace(/^#/, "");
          const path = h || "/";
          const parts = path.split("/").filter(Boolean);
          return { path, parts };
        };
        const [route, setRoute] = useState(parse());
        useEffect(() => {
          const onHash = () => setRoute(parse());
          window.addEventListener("hashchange", onHash);
          return () => window.removeEventListener("hashchange", onHash);
        }, []);
        return { route };
      }

      // ---------------- UI Primitives ----------------
      const Container = ({ children, className = "" }) => (
        <div className={cls("max-w-6xl mx-auto px-4", className)}>{children}</div>
      );

      const Badge = ({ children, active = false, onClick }) => (
        <button
          onClick={onClick}
          className={cls(
            "px-3 py-1 rounded-full text-sm border transition",
            active
              ? "bg-black text-white border-black"
              : "bg-white text-gray-700 border-gray-200 hover:border-gray-300"
          )}
        >
          <div className="flex items-center gap-1"><Tag size={14} />{children}</div>
        </button>
      );

      const Card = ({ children, className = "", onClick }) => (
        <motion.div
          whileHover={{ y: -2 }}
          transition={{ type: "spring", stiffness: 300, damping: 20 }}
          onClick={onClick}
          className={cls(
            "rounded-2xl border border-gray-200 bg-white shadow-sm hover:shadow-md cursor-pointer",
            className
          )}
        >
          {children}
        </motion.div>
      );

      const NavBar = () => (
        <header className="sticky top-0 z-30 backdrop-blur bg-white/70 border-b border-gray-100">
          <Container className="flex items-center justify-between py-3">
            <a href="#/" className="font-semibold text-lg tracking-tight">Fandub Portfolios</a>
            <nav className="flex items-center gap-2">
              <a href="#/list" className="px-3 py-1.5 text-sm rounded-full border border-gray-200 hover:bg-gray-50">Lista</a>
              <a href="#/" className="px-3 py-1.5 text-sm rounded-full border border-gray-200 hover:bg-gray-50">Inicio</a>
              <a href="#/list" className="ml-2 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-black text-white text-sm">
                Explorar <ArrowRight size={16} />
              </a>
            </nav>
          </Container>
        </header>
      );

      // ---------------- Views ----------------
      const HomeView = () => (
        <Container className="py-16 md:py-24 text-center">
          <motion.div initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.4 }}>
            <h1 className="text-4xl md:text-6xl font-semibold tracking-tight">Registry & Portfolios for Fandubbers</h1>
            <p className="mt-4 text-gray-600 max-w-2xl mx-auto">
              Un registro ficticio y portafolio de fandubers y coveristas. Descubre talentos y mira sus mejores trabajos.
            </p>
            <div className="mt-8 flex items-center justify-center gap-3">
              <a href="#/list" className="px-5 py-3 rounded-full bg-black text-white inline-flex items-center gap-2">
                Ver lista <ArrowRight size={18} />
              </a>
            </div>
          </motion.div>
        </Container>
      );

      const ListView = ({ profiles }) => {
        const [query, setQuery] = useState("");
        const [activeTags, setActiveTags] = useState([]);
        const filtered = useMemo(() => {
          const q = query.toLowerCase();
          return profiles.filter(
            (p) =>
              (!q || p.name.toLowerCase().includes(q) || p.description.toLowerCase().includes(q)) &&
              (activeTags.length === 0 || activeTags.every((t) => p.tags.includes(t)))
          );
        }, [profiles, query, activeTags]);
        const toggleTag = (t) =>
          setActiveTags((prev) => (prev.includes(t) ? prev.filter((x) => x !== t) : [...prev, t]));
        return (
          <Container className="py-10">
            <div className="relative flex-1">
              <input
                value={query}
                onChange={(e) => setQuery(e.target.value)}
                placeholder="Buscar..."
                className="w-full rounded-full border border-gray-200 bg-white px-12 py-3"
              />
              <Search className="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400" size={18} />
            </div>
            <div className="mt-5 flex flex-wrap gap-2">
              {allTags.map((t) => (
                <Badge key={t} active={activeTags.includes(t)} onClick={() => toggleTag(t)}>{t}</Badge>
              ))}
              {activeTags.length > 0 && (
                <button onClick={() => setActiveTags([])} className="ml-1 text-sm underline text-gray-600">
                  Limpiar filtros
                </button>
              )}
            </div>
            <div className="mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
              {filtered.map((p) => (
                <Card key={p.slug} onClick={() => (window.location.hash = \`#/profile/\${p.slug}\`)}>
                  <div className="p-4">
                    <div className="flex items-center gap-4">
                      <img src={p.avatar} className="w-16 h-16 rounded-full object-cover border" />
                      <div>
                        <h3 className="font-semibold text-lg">{p.name}</h3>
                        <div className="mt-1 flex flex-wrap gap-1.5">
                          {p.tags.slice(0, 4).map((t) => (
                            <span key={t} className="text-xs px-2 py-0.5 rounded-full bg-gray-100 border">{t}</span>
                          ))}
                        </div>
                      </div>
                    </div>
                    <p className="mt-4 text-sm text-gray-600">{p.description}</p>
                  </div>
                </Card>
              ))}
            </div>
          </Container>
        );
      };

      const ProfileView = ({ profile }) => {
        if (!profile) return <Container className="py-16"><p>No encontrado</p></Container>;
        return (
          <Container className="py-10">
            <div className="flex flex-col md:flex-row gap-6">
              <img src={profile.avatar} className="w-28 h-28 rounded-full border" />
              <div>
                <h2 className="text-2xl font-semibold">{profile.name}</h2>
                <p className="mt-2 text-gray-700">{profile.description}</p>
                <div className="mt-3 flex flex-wrap gap-2">
                  {profile.tags.map((t) => (
                    <span key={t} className="text-xs px-2 py-1 rounded-full bg-gray-100 border">{t}</span>
                  ))}
                </div>
                <a href="#/list" className="inline-flex items-center gap-2 mt-5 text-sm px-4 py-2 border rounded-full">
                  <ArrowLeft size={16} /> Volver a la lista
                </a>
              </div>
            </div>
            <section className="mt-10">
              <h3 className="text-lg font-medium mb-4">Portafolio de videos</h3>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                {profile.videos.map((url, i) => (
                  <div key={i} className="aspect-video border rounded-xl overflow-hidden">
                    <iframe src={url} className="w-full h-full" allowFullScreen />
                  </div>
                ))}
              </div>
            </section>
          </Container>
        );
      };

      // ---------------- App ----------------
      function App() {
        const { route } = useHashRoute();
        const [first, second] = route.parts;
        const page = !first ? "home" : first === "list" ? "list" : first === "profile" ? "profile" : "home";
        const currentProfile = useMemo(() => MOCK_DATA.find((p) => p.slug === second), [second]);
        return (
          <div>
            <NavBar />
            {page === "home" && <HomeView />}
            {page === "list" && <ListView profiles={MOCK_DATA} />}
            {page === "profile" && <ProfileView profile={currentProfile} />}
            <footer className="mt-16 border-t py-8 text-sm text-gray-500 text-center">
              © {new Date().getFullYear()} Fandub Portfolios
            </footer>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
